{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="guide">
    <div class="container">
        <p>
            <a href="{% url 'homepage_url' %}">{{ content.path_main.value }}</a>
            >>
            {{ content.projects_title.value }}
        </p>
    </div>
    <hr>
</div>
<div class="container">
    <h2>
        {{ content.projects_title.value }}
    </h2>
    <div class="projects">
        <div class="introduction">
            <div class="row">
                <div class="col-8">
                    {{ content.projects_left_content.content|safe }}
                </div>
                <div class="col-4">
                    <div class="project-list-btn">
                        <a href="media/Маркетинговое-агентство-SDA_Reference.pdf" class="btn">
                            {{ content.projects_btn_text.value }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="content">
            <div class="row">
                <div class="col-8">

                    <!-- content -->
                    <div class="projects-content" id="projects_content"></div>

                </div>

                <!-- filters -->
                <div class="col-4 filter">
                    <div class="accordion" id="accordionPanelsStayOpenExample">

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                                    aria-controls="panelsStayOpen-collapseOne">
                                    <h3>{{ content.projects_kind_filter.value }}</h3>
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse"
                                aria-labelledby="panelsStayOpen-headingOne">
                                <div class="accordion-body">
                                    {% for direction in directions %}
                                    <div class="direction_checkbox">
                                        <label for="direction_id_{{direction.id}}" class="checkbox-other">
                                            <input type="checkbox" name="" id="direction_id_{{direction.id}}"
                                                onclick="swith_query_param('direction', '{{ direction.id }}')">
                                            <span>{{ direction.title }}</span>
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                                    aria-controls="panelsStayOpen-collapseTwo">
                                    <h3>{{ content.projects_industry_filter.value }}</h3>
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse"
                                aria-labelledby="panelsStayOpen-headingTwo">
                                <div class="accordion-body">
                                    <div class="accordion-instries">
                                        {% for industry in industries %}
                                        {% if industry.title != 'Все отрасли' %}
                                        <div class="industry_checkbox">
                                            <label for="industry_id_{{industry.id}}" class="checkbox-other">
                                                <input type="checkbox" name="" id="industry_id_{{industry.id}}"
                                                    onclick="swith_query_param('industry', '{{ industry.id }}')">
                                                <span>{{ industry.title|capfirst }}</span>
                                            </label>
                                        </div>
                                        {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>

<script>
    const projects_api_url = "{% url 'project_list_api_url' %}" // url for fetch request (without query parameters)
</script>

<script src="{% static 'js/projects.js' %}"></script>
{% endblock content %}